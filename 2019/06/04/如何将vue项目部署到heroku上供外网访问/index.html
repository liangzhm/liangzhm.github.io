<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 如何将vue项目部署到heroku上供外网访问 · 和叶的空间</title><meta name="description" content="如何将vue项目部署到heroku上供外网访问 - null"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="https://github.com/liangzhm/atom.xml" title="和叶的空间"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="https://github.com/liangzhm" target="_blank" class="nav-list-link">GITHUB</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">如何将vue项目部署到heroku上供外网访问</h1><div class="post-info">Jun 4, 2019</div><div class="post-content"><h2 id="1-在heroku网站上注册账号"><a href="#1-在heroku网站上注册账号" class="headerlink" title="1. 在heroku网站上注册账号"></a>1. 在heroku网站上注册账号</h2><p><a href="https://www.heroku.com/" target="_blank" rel="noopener">https://www.heroku.com/</a></p>
<h2 id="2-安装heroku-cli"><a href="#2-安装heroku-cli" class="headerlink" title="2. 安装heroku-cli"></a>2. 安装heroku-cli</h2><p><a href="https://devcenter.heroku.com/articles/heroku-cli#download-and-install" target="_blank" rel="noopener">https://devcenter.heroku.com/articles/heroku-cli#download-and-install</a><br>全局安装heroku命令<br>npm install -g heroku<br>查看版本<br>heroku –version<br>开始登陆<br>heroku login<br>会自动打开浏览器，登陆后，显示done</p>
<h2 id="3-创建app"><a href="#3-创建app" class="headerlink" title="3. 创建app"></a>3. 创建app</h2><p>  进入项目根目录 cd myapp<br>  创建heroku项目 heroku create 会随机生成一个名称，在网站内可以看到，同时也是以后的访问路径前缀</p>
<h2 id="4-修改配置文件"><a href="#4-修改配置文件" class="headerlink" title="4. 修改配置文件"></a>4. 修改配置文件</h2><p>部署前记得将配置文件中baseUrl改为’./‘<br>将.gitignore文件中的dist一行注释掉，需要将dist目录提交到master分支</p>
<h2 id="5-修改package-json"><a href="#5-修改package-json" class="headerlink" title="5. 修改package.json"></a>5. 修改package.json</h2><p>   在package.json 文件中的scripts中增加以下两句：<br>   “postinstall”: “npm run build”,<br>   “start”: “node server.js”</p>
<h2 id="6-在项目根目录下创建server-js文件"><a href="#6-在项目根目录下创建server-js文件" class="headerlink" title="6. 在项目根目录下创建server.js文件"></a>6. 在项目根目录下创建server.js文件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">const express = require(&apos;express&apos;);</span><br><span class="line">const path = require(&apos;path&apos;);</span><br><span class="line">const serverStatic = require(&apos;serve-static&apos;);</span><br><span class="line"></span><br><span class="line">const app = express();</span><br><span class="line">app.use(serverStatic(path.join(__dirname, &apos;dist&apos;)));</span><br><span class="line">const port = process.env.PORT || 5000;</span><br><span class="line">app.listen(port);</span><br><span class="line">console.log(port);</span><br></pre></td></tr></table></figure>
<p>同时记得npm i 上面那些包</p>
<h1 id="7-打包"><a href="#7-打包" class="headerlink" title="7. 打包"></a>7. 打包</h1><p>   npm run build 一下，然后提交到master分支</p>
<h1 id="8-将heroku和github进行关联"><a href="#8-将heroku和github进行关联" class="headerlink" title="8. 将heroku和github进行关联"></a>8. 将heroku和github进行关联</h1><p>   运行 heroku git:remote -a floating-sands-17593（刚才生成的随机项目名字）</p>
<h1 id="9-设置heroku配置"><a href="#9-设置heroku配置" class="headerlink" title="9. 设置heroku配置"></a>9. 设置heroku配置</h1><p>   运行 heroku config:set NPM_CONFIG_PRODUCTION=false<br>   NPM_CONFIG_PRODUCTION=false的意思是既安装dependencies里的依赖，也安装devDependencies里的依赖</p>
<h1 id="10-设置heroku执行语言"><a href="#10-设置heroku执行语言" class="headerlink" title="10. 设置heroku执行语言"></a>10. 设置heroku执行语言</h1><p>  运行 heroku buildpacks:set heroku/nodejs<br>  意思是让heroku以nodejs的服务运行</p>
<h1 id="11-部署"><a href="#11-部署" class="headerlink" title="11. 部署"></a>11. 部署</h1><pre><code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git add .</span><br><span class="line">git commit -m&quot;bushu&quot;</span><br><span class="line">git push heroku master</span><br></pre></td></tr></table></figure>
</code></pre><p>可以看到部署的进度和部署状态，后面有部署的网址，打开即可看到网址已经成功的部署到外网可以访问。</p>
</div></article></div></main><footer><div class="paginator"><a href="/2019/03/28/浅谈函数的防抖和节流/" class="next">NEXT</a></div><div id="comment"></div><div id="comment2"><script src="https://cdnjs.cat.net/ajax/libs/jquery/3.2.1/jquery.min.js"></script><script id="dsq-count-scr1" src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script id="dsq-count-scr" src="//unpkg.com/valine/dist/Valine.min.js"></script><script>(function() {
    new Valine({
        el: '#comment',
        notify: false,
        verify: false,
        appId: 'B3xcjTWq77EgT99KmwW2D037-gzGzoHsz',
        appKey: 'qDSExhsQY3zUDDUz3QvjjWcc',
        placeholder: 'just go go',
        path: window.location.pathname,
        avatar: 'mm'
    });
})</script></div><!--include partial/comment--><div class="copyright"><p>© 2015 - 2019 <a href="https://github.com/liangzhm"></a>.</p><!--p © #{year} #[a(href=config.url)!= config.author], powered by #[a(href=hexoURL, target="_blank") Hexo] and #[a(href=apolloURL, target="_blank") hexo-theme-apollo].--></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>